const https=require("https"),resolve=require("path")["resolve"];let default_sleepTime=2e3;async function sleep(t=default_sleepTime){return new Promise(e=>setTimeout(e,t))}async function get(s){return new Promise((t,e)=>{s.includes("http://")&&e("Please use https://"),request({hostname:(s=s.replace("https://","").split(/\/(.+)/))[0],port:443,method:"GET",path:"/"+s[1]}).then(async e=>t(e))})}async function post(s){return new Promise((t,e)=>{s.includes("http://")&&e("Please use https://"),request({hostname:(s=s.replace("https://","").split(/\/(.+)/))[0],port:443,method:"POST",path:"/"+s[1]}).then(e=>t(e))})}async function onChange(t,s,n,e=1e4){let a="GET"===s?await get(t):await post(t);setInterval(async()=>{var e;(e="GET"===s?await get(t):await post(t))!=a&&(a=e,n(e))},e)}async function request(n){return new Promise((s,t)=>{let e=https.request(n,e=>{let t="";e.on("data",e=>t+=e),e.on("end",()=>s(t))});e.on("error",e=>t(e.message)),e.end()})}module.exports={sleep:sleep,get:get,post:post,onChange:onChange};